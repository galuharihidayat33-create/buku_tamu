<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Buku Tamu Wedding ‚Äî Irwan & Aida</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- html5-qrcode -->
  <script src="https://cdn.jsdelivr.net/npm/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>

  <!-- SheetJS -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

  <!-- Icon (Font Awesome / IG & WA) -->
  <script src="https://kit.fontawesome.com/a2e0e9f6f9.js" crossorigin="anonymous"></script>

  <style>
    .glass { background: rgba(255,255,255,0.85); backdrop-filter: blur(8px); }
    .modal-backdrop { background: rgba(10,11,12,0.55); }
    @keyframes pop { from{transform:scale(.9);opacity:0} to{transform:scale(1);opacity:1} }
    .anim-pop { animation: pop .2s ease-out both; }
    body { font-family: 'Poppins', sans-serif; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-rose-50 via-white to-amber-50 text-slate-800 flex flex-col">

  <!-- HEADER -->
  <header class="relative text-center py-8 bg-gradient-to-r from-rose-100 to-amber-50 shadow-md">
    <h1 class="text-3xl md:text-4xl font-bold text-rose-700">Irwan & Aida</h1>
    <p class="mt-1 text-sm text-slate-600">Sabtu, 12 Oktober 2025 ‚Ä¢ Bandung</p>
    <div class="mt-2 text-xs tracking-wide text-slate-500">Buku Tamu Digital</div>
  </header>

  <!-- MAIN -->
  <main class="flex-1 max-w-6xl mx-auto w-full p-6">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- SCANNER -->
      <section class="glass rounded-2xl shadow-lg p-5 flex flex-col gap-4">
        <h2 class="text-lg font-medium text-rose-700">üì∑ Scan QR Undangan</h2>
        <div id="qr-wrapper" class="rounded-lg border border-slate-200 overflow-hidden">
          <div id="qr-reader" class="w-full"></div>
        </div>
        <div class="flex gap-2">
          <button id="start-scan" class="flex-1 py-2 rounded-md bg-rose-600 text-white hover:bg-rose-700">Mulai Scan</button>
          <button id="stop-scan" class="py-2 rounded-md bg-slate-200 hover:bg-slate-300">Stop</button>
          <button id="toggle-camera" class="py-2 rounded-md bg-amber-400 text-white hover:bg-amber-500">Ganti Kamera</button>
        </div>
      </section>

      <!-- FORM -->
      <section class="glass rounded-2xl shadow-lg p-5 flex flex-col gap-4">
        <h2 class="text-lg font-medium text-rose-700">üìù Check-in Manual</h2>
        <form id="manual-form" class="space-y-3">
          <input id="name" required placeholder="Nama Lengkap" class="w-full rounded-lg border border-slate-200 px-3 py-2" />
          <input id="org" placeholder="Instansi / Perusahaan" class="w-full rounded-lg border border-slate-200 px-3 py-2" />
          <input id="phone" placeholder="Nomor HP" class="w-full rounded-lg border border-slate-200 px-3 py-2" />
          <textarea id="message" rows="2" placeholder="Ucapan / Keperluan" class="w-full rounded-lg border border-slate-200 px-3 py-2"></textarea>
          <div class="flex gap-2">
            <button type="submit" class="flex-1 py-2 rounded-md bg-rose-600 text-white hover:bg-rose-700">Check-in</button>
            <button id="clear-form" type="button" class="py-2 rounded-md bg-slate-200 hover:bg-slate-300">Bersihkan</button>
          </div>
        </form>
        <div class="flex gap-2 mt-2">
          <button id="export-xlsx" class="flex-1 py-2 rounded-md bg-green-600 text-white hover:bg-green-700">Export .xlsx</button>
          <button id="export-csv" class="py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700">Export .csv</button>
          <button id="clear-db" class="py-2 rounded-md bg-red-500 text-white hover:bg-red-600">Hapus Semua</button>
        </div>
      </section>
    </div>

    <!-- TABLE -->
    <section class="mt-6 bg-white rounded-2xl shadow p-4">
      <div class="flex items-center justify-between mb-3">
        <h3 class="text-lg font-medium">üìã Daftar Tamu</h3>
        <div class="text-sm text-slate-500">Total: <span id="count-total">0</span></div>
      </div>
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead class="bg-slate-50 sticky top-0">
            <tr>
              <th class="p-2 text-left">Waktu</th>
              <th class="p-2 text-left">Nama</th>
              <th class="p-2 text-left">Instansi</th>
              <th class="p-2 text-left">No. HP</th>
              <th class="p-2 text-left">Pesan</th>
              <th class="p-2 text-left">Aksi</th>
            </tr>
          </thead>
          <tbody id="guest-body"></tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="bg-gradient-to-r from-rose-100 to-amber-50 text-center py-6 text-sm text-slate-600 border-t">
    <p class="mb-2">Supported by <a href="https://arinvitation.my.id" target="_blank" class="font-medium text-rose-700 hover:underline">arinvitation.my.id</a></p>
    <div class="flex justify-center gap-4 text-lg">
      <a href="https://instagram.com/arinvitation.my.id" target="_blank" class="text-pink-600 hover:text-pink-700"><i class="fab fa-instagram"></i></a>
      <a href="https://wa.me/6281234567890" target="_blank" class="text-green-600 hover:text-green-700"><i class="fab fa-whatsapp"></i></a>
    </div>
  </footer>

  <!-- MODAL -->
  <div id="modal" class="hidden fixed inset-0 z-50 flex items-center justify-center">
    <div class="absolute inset-0 modal-backdrop"></div>
    <div class="relative bg-white rounded-xl shadow-xl p-6 w-[90%] max-w-md anim-pop">
      <h4 id="modal-title" class="text-lg font-semibold mb-2">Pemberitahuan</h4>
      <p id="modal-message" class="text-sm text-slate-700 mb-4"></p>
      <div class="text-right">
        <button id="modal-ok" class="px-4 py-2 rounded-md bg-rose-600 text-white hover:bg-rose-700">OK</button>
      </div>
    </div>
  </div>

  <!-- SOUNDS -->
  <audio id="sound-success" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
  <audio id="sound-dup" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>

  <!-- SCRIPT (pakai yang versi sebelumnya, tidak saya hapus biar singkat di sini) -->
  <script>
    // === Paste seluruh script logika buku tamu versi sebelumnya di sini ===
    // (IndexedDB, Form, Export, Scanner, Modal, Sound)
  </script>
</body>
</html>
